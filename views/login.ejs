<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<link rel="icon" href="https://lh3.googleusercontent.com/1trO7Z8iE-xHKkogGrwLXrGr8e3i2Df8JHDe--AJ3o4EoPFXHk3AkTV5MhjY3Xt7dqw=s180"  type="image/x-icon">

<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body, html {
  height: 100%;
  font-family: Arial, Helvetica, sans-serif;
  background-image:url('norm.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

* {
  box-sizing: border-box;
}

.bg-img {
  /* The image used */
 
  min-height: 630px;

  /* Center and scale the image nicely */
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  position: relative;
}

/* Add styles to the form container */
.container {
    display:flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin: auto;
  
  max-width: 330px;
  padding: 16px 26px;
  background-color: white;
  height:400px;
  border: 1px solid black;
  border-radius: 10px;
  margin-top: 0px;
}

/* Full-width input fields */
input[type=email], input[type=password] {
  width: 100%;
  padding: 15px;
  margin: 5px 0 22px 0;
  border: none;
  background: #f1f1f1;
}

input[type=email]:focus, input[type=password]:focus {
  background-color: #ddd;
  outline: none;
}

/* Set a style for the submit button */
.btn {
  background-color: #4CAF50;
  color: white;
  padding: 16px 20px;
  border: none;
  cursor: pointer;
  width: 100%;
  opacity: 0.9;
}

.btn:hover {
  opacity: 1;
}
#mainlogo img{
    border:1px solid black;
}
</style>
<body>
    
    <!-- <form action = '/login' method = 'post'>
        <input type = 'email' placeholder="Enter your email" name = 'email'>
        <input type = 'password' placeholder="Enter your password" name = 'password'>
        <button>submit</button>
    </form> -->
    <div id = "mainlogo"><img src = "/logowix.jpeg" width="200px" height = "80px" ></div>
    <div class="bg-img">
        <form  action = '/login' method = 'post' class="container">
      <h1><img src="https://lh3.googleusercontent.com/1trO7Z8iE-xHKkogGrwLXrGr8e3i2Df8JHDe--AJ3o4EoPFXHk3AkTV5MhjY3Xt7dqw=s180" alt="HealthTracker" style="width:12%">Login</h1>
      
          <label for="email"><b>Email</b></label>
          <input type = 'email' placeholder="Enter your email" name = 'email'>
      
          <label for="psw"><b>Password</b></label>
          <input type = 'password' placeholder="Enter your password" name = 'password'>
      
          <button type="submit" class="btn">Login</button>
        
      <p style="font-family:verdana;font-size:14px">Not Registered? <a href="/signup">Register Here</a></p></form>
      
      </div>
</body>

<script>
    const form = document.querySelector('form');
    form.addEventListener('submit',async (e)=>{
        e.preventDefault();

        
        const email = form.email.value;
        const password = form.password.value;
        console.log(email,password);

        try {
      const res = await fetch('/login', { 
        method: 'POST', 
        body: JSON.stringify({ email, password }),
        headers: {'Content-Type': 'application/json'}
      });
            const data = await res.json();
            console.log(data);
            if (data.errors) {
        emailError.textContent = data.errors.email;
        passwordError.textContent = data.errors.password;
      }
            if(data.user){
                console.log('last rtes case');
                location.assign('/homepage.ejs');
            }
            
            console.log('You passed this case 2');
        }
        catch(err){
           alert('You have Entered Invalid or Incorrect data');
            console.log(err);
        }
    });
</script>
</html>